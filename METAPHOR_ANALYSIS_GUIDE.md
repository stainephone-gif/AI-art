# Руководство по Расширенному Анализу Метафор

## Концептуальная Основа

Этот модуль разработан для решения **трудной проблемы анализа метафор** в контексте AI-арта и исследований сознания.

### Ключевая Проблема

**Метафора Метафоры** — художники используют научные метафоры о сознании (например, "мозг как компьютер") и превращают их в художественные образы (например, "алгоритм как художник"). Это создаёт многоуровневую метафорическую структуру:

```
Научная теория → Научная метафора → Художественная интерпретация → Произведение AI-арта
     ↓                   ↓                        ↓                           ↓
    PRED          "мозг предсказывает"    "генеративная модель     Генеративное
                                          как воображение"         искусство
```

### Гипотеза

> Художники, работающие с современными алгоритмами машинного обучения, **тематизируют** трудную проблему сознания в своих работах. Анализируя используемые метафоры, можно определить, какую теорию сознания тематизирует художник.

---

## Архитектура Системы

### 1. Четырёхуровневая Модель Метафор

#### Уровень 1: EXPLICIT_TERM (вес 1.0)
Прямое упоминание теоретического термина.

**Примеры:**
- "интегрированная информация Тонони"
- "предиктивное кодирование Фристона"
- "энактивный подход Варелы"

```python
# Обнаружение в тексте
MetaphorLevel.EXPLICIT_TERM
# Вес: 1.0 × тип метафоры
```

#### Уровень 2: SCIENTIFIC_METAPHOR (вес 0.7)
Метафора в научном дискурсе о сознании.

**Примеры:**
- "мозг как компьютер" → COMP
- "сознание как театр разума" → GWT
- "восприятие как контролируемая галлюцинация" → PRED

```python
MetaphorLevel.SCIENTIFIC_METAPHOR
# Вес: 0.7 × тип метафоры
```

#### Уровень 3: META_METAPHOR (вес 0.8) ⭐
**Ключевой уровень для AI-арта!**

Художественная интерпретация научной метафоры.

**Паттерны трансформации:**

| Теория | Научная метафора | Meta-метафора | Пример в AI-арте |
|--------|------------------|---------------|------------------|
| COMP | "мозг как компьютер" | "алгоритм как художник" | Нейросеть создаёт картины |
| PRED | "мозг предсказывает" | "генеративная модель как воображение" | GAN синтезирует образы |
| ENACT | "познание через тело" | "жест как мысль" | Телесное взаимодействие с AI |
| EMERG | "сознание как эмерджентность" | "роевой разум" | Коллективный алгоритм |
| IIT | "опыт как целое" | "интегрированное восприятие" | Неделимый синтез |
| GWT | "внимание как прожектор" | "фокус внимания" | Выбор образа системой |
| PAN | "материя чувствует" | "живая материя" | Одушевлённые объекты |

```python
MetaphorLevel.META_METAPHOR
# Вес: 0.8 × тип метафоры
# Высокий вес отражает важность для AI-арта
```

#### Уровень 4: NESTED_METAPHOR (вес 0.5)
Многослойная метафорическая трансформация без чёткой привязки.

---

### 2. Типология Метафор

#### ONTOLOGICAL (×1.2) — Приоритет!
Метафоры о **природе сознания/разума**.

**Индикаторы:**
- сознание, разум, мышление, познание, опыт
- consciousness, mind, thinking, cognition
- субъективность, квалиа, осознание
- природа, сущность, механизм разума

**Пример:**
```
"Нейросеть создаёт сознательный опыт через интеграцию данных"
         ↑                    ↑                    ↑
    META_METAPHOR      ONTOLOGICAL         Высокий вес (0.96)
```

#### STRUCTURAL (×1.0)
Метафоры о **структуре/архитектуре**.

**Индикаторы:**
- архитектура, структура, слои, уровни
- организация, иерархия, модули

#### ORIENTATIONAL (×0.8)
Метафоры о **пространственно-временных отношениях**.

**Индикаторы:**
- внутри/снаружи, верх/низ, глубина/поверхность
- центр/периферия, пространство/время

#### DECORATIVE (×0.3) — Игнорировать
Декоративные метафоры без теоретического содержания.

---

### 3. Семантическая Онтология

Каждая теория сознания имеет набор **семантических полей**:

```python
COMPUTATIONAL = {
    'keywords': ['алгоритм', 'вычисление', 'программа', 'код'],
    'scientific_metaphors': ['мозг как компьютер'],
    'artistic_transformations': ['алгоритм как художник'],
    'theory': 'COMP'
}

PREDICTIVE = {
    'keywords': ['предсказание', 'прогноз', 'байесовский', 'prior'],
    'scientific_metaphors': ['мозг как байесовский предсказатель'],
    'artistic_transformations': ['генеративная модель как воображение'],
    'theory': 'PRED'
}

# ... и так далее для всех теорий
```

---

## Расчёт Весов

### Формула

```
Weight = base_weight(level) × type_multiplier(type) × context_relevance

где:
- base_weight(EXPLICIT_TERM) = 1.0
- base_weight(SCIENTIFIC_METAPHOR) = 0.7
- base_weight(META_METAPHOR) = 0.8  # Повышен для AI-арта
- base_weight(NESTED_METAPHOR) = 0.5

- type_multiplier(ONTOLOGICAL) = 1.2
- type_multiplier(STRUCTURAL) = 1.0
- type_multiplier(ORIENTATIONAL) = 0.8
- type_multiplier(DECORATIVE) = 0.3

- context_relevance = 0.0 ... 1.0  # из семантического анализа
```

### Примеры Расчёта

**Пример 1: Meta-метафора + Ontological**
```
Текст: "Генеративная модель создаёт образы, подобно воображению"

Уровень: META_METAPHOR (0.8)
Тип: ONTOLOGICAL (×1.2)
Контекст: 0.9 (высокая релевантность PRED)

Weight = 0.8 × 1.2 × 0.9 = 0.864
Теория: PRED
```

**Пример 2: Explicit + Decorative**
```
Текст: "Алгоритм красиво визуализирует данные"

Уровень: EXPLICIT_TERM (1.0)
Тип: DECORATIVE (×0.3)  # "красиво" — декоративное
Контекст: 0.5

Weight = 1.0 × 0.3 × 0.5 = 0.15
Теория: UND (слишком низкий вес)
```

**Пример 3: Scientific + Structural**
```
Текст: "Архитектура нейросети моделирует иерархию восприятия"

Уровень: SCIENTIFIC_METAPHOR (0.7)
Тип: STRUCTURAL (×1.0)
Контекст: 0.8

Weight = 0.7 × 1.0 × 0.8 = 0.56
Теория: COMP/PRED (гибрид)
```

---

## Анализ Сети Метафор

### Детекция Паттерна "Метафора Метафоры"

Система автоматически обнаруживает паттерн:

```python
# Условия детекции
meta_metaphor_detected = (
    есть META_METAPHOR AND
    есть SCIENTIFIC_METAPHOR AND
    они относятся к одной теории
)

# Пример положительной детекции
Evidence 1: SCIENTIFIC_METAPHOR "мозг как предсказатель" → PRED
Evidence 2: META_METAPHOR "генеративная модель как воображение" → PRED

→ meta_metaphor_detected = True
→ dominant_pattern = "PRED"
→ transformation = "scientific concept → artistic practice"
```

### Кластерный Анализ

Группировка метафор по теориям для выявления гибридов:

```python
clusters = {
    'PRED': {
        'total_evidence': 5,
        'meta_metaphor_count': 2,
        'scientific_metaphor_count': 1,
        'ontological_count': 4,
        'total_weight': 3.2
    },
    'COMP': {
        'total_evidence': 3,
        'meta_metaphor_count': 1,
        'total_weight': 1.8
    }
}

# Детекция гибрида
if clusters['PRED']['total_weight'] >= 0.5 AND
   clusters['COMP']['total_weight'] >= 0.5:
    → is_hybrid = True
    → hybrid_theories = ['PRED', 'COMP']
```

---

## Использование

### Базовое Использование

```bash
# Запуск расширенного классификатора
python enhanced_classifier.py
```

### Программное Использование

```python
from metaphor_analyzer import MetaphorAnalyzer

analyzer = MetaphorAnalyzer()

# Анализ текста
text = """
Работа исследует как нейронная сеть создаёт образы,
превращая алгоритм в художника. Генеративная модель
действует как воображение, синтезируя восприятие.
"""

# Извлечение метафор
evidence = analyzer.extract_metaphors(text)

for e in evidence:
    print(f"Теория: {e.theory_class}")
    print(f"Уровень: {e.level.value}")
    print(f"Тип: {e.type.value}")
    print(f"Вес: {e.weight:.2f}")
    print(f"Текст: {e.span}")

# Анализ сети
network = analyzer.analyze_metaphor_network(evidence)
print(f"Meta-metaphor detected: {network['meta_metaphor_detected']}")
print(f"Dominant pattern: {network['dominant_pattern']}")
```

### Интеграция с Классификатором

```python
from enhanced_classifier import EnhancedMetaphorClassifier

classifier = EnhancedMetaphorClassifier()

# Классификация с пре-анализом метафор
result = classifier.classify_description(description)

# Результат содержит:
# - primary_class: основная теория
# - scores: оценки по всем теориям
# - evidence: детальные свидетельства с уровнями и типами метафор
# - metaphor_analysis: анализ паттерна "метафора метафоры"
# - metaphor_pre_analysis: предварительный анализ перед LLM
```

---

## Интерпретация Результатов

### Структура Результата

```json
{
  "primary_class": "PRED",
  "confidence": "high",
  "scores": {
    "COMP": 0.3,
    "PRED": 0.9,
    "ENACT": 0.4
  },
  "evidence": [
    {
      "class": "PRED",
      "metaphor_level": "meta_metaphor",
      "metaphor_type": "ontological",
      "span": "генеративная модель как воображение",
      "weight": 0.96,
      "reasoning": "Художественная интерпретация предиктивного кодирования"
    }
  ],
  "is_hybrid": true,
  "secondary_class": "COMP",
  "metaphor_analysis": {
    "meta_metaphor_detected": true,
    "dominant_semantic_field": "predictive_generative",
    "artistic_transformation": "scientific concept → artistic practice",
    "theoretical_grounding": "PRED + COMP hybrid"
  },
  "notes": "Работа демонстрирует паттерн 'метафора метафоры'"
}
```

### Ключевые Индикаторы

✅ **Сильная классификация:**
- `primary_class` score ≥ 0.7
- `confidence: "high"`
- `meta_metaphor_detected: true`
- Несколько evidence с `metaphor_level: "meta_metaphor"`
- `metaphor_type: "ontological"` преобладает

⚠️ **Гибридная теория:**
- `is_hybrid: true`
- Два+ класса с scores ≥ 0.5
- `metaphor_analysis.theoretical_grounding` показывает комбинацию

❌ **Неопределённая классификация:**
- `primary_class: "UND"`
- Все scores < 0.5
- Только `decorative` метафоры
- `confidence: "low"`

---

## Примеры Анализа

### Пример 1: Чистый PRED

**Текст:**
```
Художник использует генеративно-состязательную сеть, которая
предсказывает и синтезирует новые образы, минимизируя ошибку
между прогнозом и реальностью. Это исследование восприятия
как контролируемой галлюцинации.
```

**Результат:**
```json
{
  "primary_class": "PRED",
  "confidence": "high",
  "scores": {"PRED": 0.95, "COMP": 0.3},
  "evidence": [
    {
      "metaphor_level": "scientific_metaphor",
      "metaphor_type": "ontological",
      "span": "восприятие как контролируемая галлюцинация",
      "weight": 0.84
    },
    {
      "metaphor_level": "meta_metaphor",
      "metaphor_type": "ontological",
      "span": "генеративная сеть предсказывает и синтезирует",
      "weight": 0.96
    }
  ],
  "metaphor_analysis": {
    "meta_metaphor_detected": true,
    "dominant_semantic_field": "predictive_bayesian"
  }
}
```

**Интерпретация:**
- ✅ Явная тематизация PRED (предиктивное кодирование)
- ✅ Meta-метафора: GAN → воображение
- ✅ Онтологический фокус на природе восприятия

---

### Пример 2: Гибрид COMP + ENACT

**Текст:**
```
Работа превращает алгоритм в агента, который познаёт мир
через телесное взаимодействие с материальной средой.
Код становится воплощённым разумом.
```

**Результат:**
```json
{
  "primary_class": "ENACT",
  "secondary_class": "COMP",
  "is_hybrid": true,
  "confidence": "high",
  "scores": {"ENACT": 0.85, "COMP": 0.7},
  "evidence": [
    {
      "metaphor_level": "meta_metaphor",
      "metaphor_type": "ontological",
      "span": "алгоритм познаёт через телесное взаимодействие",
      "weight": 0.96
    },
    {
      "metaphor_level": "meta_metaphor",
      "metaphor_type": "ontological",
      "span": "код как воплощённый разум",
      "weight": 0.96
    }
  ],
  "metaphor_analysis": {
    "meta_metaphor_detected": true,
    "theoretical_grounding": "ENACT + COMP hybrid"
  }
}
```

**Интерпретация:**
- ✅ Гибрид энактивизма и функционализма
- ✅ Две мета-метафоры онтологического типа
- ✅ Художественная трансформация: "алгоритм" → "воплощённый агент"

---

### Пример 3: Декоративный (UND)

**Текст:**
```
Красивая визуализация данных создаёт эстетически приятные
паттерны на экране, радуя глаз зрителя.
```

**Результат:**
```json
{
  "primary_class": "UND",
  "confidence": "low",
  "scores": {"COMP": 0.2, "UND": 0.8},
  "evidence": [
    {
      "metaphor_level": "nested_metaphor",
      "metaphor_type": "decorative",
      "span": "красивая визуализация",
      "weight": 0.15
    }
  ],
  "metaphor_analysis": {
    "meta_metaphor_detected": false
  }
}
```

**Интерпретация:**
- ❌ Декоративные метафоры (низкий вес)
- ❌ Нет онтологического содержания
- ❌ Нет связи с теориями сознания

---

## Визуализации

Система создаёт расширенные визуализации:

1. **Distribution of Primary Classes** — распределение теорий
2. **Meta-Metaphor Detection Rate** — процент обнаружения мета-метафор
3. **Theory Hybridity** — доля гибридных теорий
4. **Average Scores by Theory** — средние оценки
5. **Metaphor Levels Distribution** — распределение уровней метафор
6. **Metaphor Types Distribution** — распределение типов метафор
7. **Confidence Distribution** — распределение уверенности
8. **Theory Scores Heatmap** — тепловая карта оценок

---

## Методологические Рекомендации

### Для Исследователей

1. **Фокус на META_METAPHOR**
   - Это ключевой индикатор тематизации теорий сознания в AI-арте
   - Высокий процент meta-metaphor = художник сознательно работает с теориями

2. **Гибриды — не ошибка**
   - Современные художники часто комбинируют теории
   - Гибриды PRED+COMP особенно характерны для генеративного искусства

3. **Контекст важнее терминов**
   - Технический термин в декоративном контексте ≠ тематизация
   - Онтологические метафоры > структурные > декоративные

### Для Кураторов

1. **Интерпретация результатов**
   - `confidence: "high"` + `meta_metaphor_detected` = сильная теоретическая основа
   - Множество evidence с разными levels = глубокая работа с концепцией

2. **Выявление паттернов**
   - Смотрите на `metaphor_analysis.artistic_transformation`
   - Анализируйте связь scientific_metaphor → meta_metaphor

3. **Критическая оценка**
   - Проверяйте reasoning в evidence
   - Сравнивайте автоматический анализ с ручным

---

## Ограничения и Будущие Улучшения

### Текущие Ограничения

1. **Язык**
   - Онтология настроена на русский + английский
   - Другие языки требуют расширения

2. **Контекст**
   - Система не учитывает визуальный контекст работы
   - Фокус только на текстовых описаниях

3. **Семантика**
   - Keyword-based подход имеет ограничения
   - Нужны более сложные semantic embeddings

### Планируемые Улучшения

1. **Multilingual Support**
   - Расширение онтологии на другие языки
   - Кросс-лингвальные embedding

2. **Multimodal Analysis**
   - Интеграция анализа изображений
   - Vision-Language модели для мета-метафор

3. **Graph-based Analysis**
   - Построение графа метафорических трансформаций
   - Выявление путей: теория → научная метафора → художественная интерпретация → произведение

4. **Fine-tuned Models**
   - Дообучение LLM на корпусе AI-арта
   - Специализированная модель для детекции мета-метафор

---

## Теоретический Фундамент

### Концептуальная метафора (Lakoff & Johnson)

Базовая теория: метафоры не просто языковые украшения, но **когнитивные структуры**.

**Приложение к AI-арту:**
- Художники используют концептуальные метафоры теорий сознания
- Метафоры структурируют понимание отношения AI-сознание

### Hard Problem of Consciousness (Chalmers)

Трудная проблема: почему физические процессы порождают субъективный опыт?

**Приложение к AI-арту:**
- Художники тематизируют эту проблему через мета-метафоры
- AI как инструмент исследования сознания

### Метафорология (Blumenberg)

Метафоры как способ концептуализации непознаваемого.

**Приложение:**
- Научные метафоры о сознании → непостижимость субъективного
- Художественные мета-метафоры → исследование границ понимания

---

## Заключение

Эта система представляет собой первую попытку **систематического анализа многоуровневых метафор** в контексте AI-арта и теорий сознания.

Ключевые инновации:
- ✅ Четырёхуровневая модель метафор
- ✅ Детекция паттерна "метафора метафоры"
- ✅ Типология метафор с онтологическим приоритетом
- ✅ Семантическая онтология для 7 теорий сознания
- ✅ Кластерный анализ и выявление гибридов

**Основной результат:**
Система позволяет эмпирически проверить гипотезу о том, что художники AI-арта тематизируют трудную проблему сознания через художественное переосмысление научных метафор.

---

## Контакты и Вклад

Для вопросов и предложений по улучшению системы, пожалуйста, создайте issue в репозитории.

**Цитирование:**
```
Enhanced Metaphor Analysis for Consciousness Theories in AI Art (2024)
Multi-level metaphor detection system with focus on meta-metaphor patterns
```
